<!DOCTYPE html>
<html lang="en">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <title>
  Running Torrrent with VPN in a container · Jayadeep KM
</title>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">




<meta name="author" content="Jayadeep KM">
<meta name="description" content="Setup Deluge torrent client with VPN and a fail-safe kill-switch">
<meta name="keywords" content="blog,developer,personal">


  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Running Torrrent with VPN in a container">
  <meta name="twitter:description" content="Setup Deluge torrent client with VPN and a fail-safe kill-switch">

<meta property="og:url" content="http://192.168.1.63:1313/posts/3-torrent-vpn-container/">
  <meta property="og:site_name" content="Jayadeep KM">
  <meta property="og:title" content="Running Torrrent with VPN in a container">
  <meta property="og:description" content="Setup Deluge torrent client with VPN and a fail-safe kill-switch">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2022-05-30T00:00:00+00:00">
    <meta property="article:modified_time" content="2022-05-30T00:00:00+00:00">
    <meta property="article:tag" content="Vpn">
    <meta property="article:tag" content="Homelab">
    <meta property="article:tag" content="Articles">




<link rel="canonical" href="http://192.168.1.63:1313/posts/3-torrent-vpn-container/">


<link rel="preload" href="/fonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>


  
  
  <link rel="stylesheet" href="/css/coder.css" media="screen">






  
    
    
    <link rel="stylesheet" href="/css/coder-dark.css" media="screen">
  



 




<link rel="icon" type="image/svg+xml" href="/images/favicon.svg" sizes="any">
<link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16">

<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">









</head>






<body class="preload-transitions colorscheme-auto">
  
<div class="float-container">
    <a id="dark-mode-toggle" class="colorscheme-toggle">
        <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
    </a>
</div>


  <main class="wrapper">
    <nav class="navigation">
  <section class="container">
    
    <a class="navigation-title" href="http://192.168.1.63:1313/">
      Jayadeep KM
    </a>
    
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa-solid fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link " href="/about/">About</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/posts/">Posts</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/projects/">Projects</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/contact/">Contact me</a>
            </li>
          
        
        
      </ul>
    
  </section>
</nav>


    <div class="content">
      
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">
            <a class="title-link" href="http://192.168.1.63:1313/posts/3-torrent-vpn-container/">
              Running Torrrent with VPN in a container
            </a>
          </h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fa-solid fa-calendar" aria-hidden="true"></i>
              <time datetime="2022-05-30T00:00:00Z">
                May 30, 2022
              </time>
            </span>
            <span class="reading-time">
              <i class="fa-solid fa-clock" aria-hidden="true"></i>
              3-minute read
            </span>
          </div>
          
          
          <div class="tags">
  <i class="fa-solid fa-tag" aria-hidden="true"></i>
    <span class="tag">
      <a href="/tags/vpn/">Vpn</a>
    </span>
      <span class="separator">•</span>
    <span class="tag">
      <a href="/tags/homelab/">Homelab</a>
    </span>
      <span class="separator">•</span>
    <span class="tag">
      <a href="/tags/articles/">Articles</a>
    </span></div>

        </div>
      </header>

      <div class="post-content">
        
        <p>Torrent is one of the fastest ways to share files across internet
without having a central distribution point. But the major disadvantage
of torrent is that it exposes the public IP of the users to everyone who
has access to that torrent file. This is dangerous for a number of
reasons. My concern is not about hackers or anything like that. I live
in a country where torrent is &ldquo;considered&rdquo; to be illegal. It is not
illegal as per law, but we can expect some letters from the ISP if we
download any copyrighted stuff from torrent. That is not a big deal for
me, as I don&rsquo;t download any pirated movies or anything from torrent. But
I still hate the fact that people can easily identify me using public IP
when using torrent.</p>
<p>I could purchase a seedbox and use it to download torrents. But I wanted
to try to setup a torrent client through VPN. That&rsquo;s when I came across
this: <a href="https://github.com/binhex/arch-delugevpn"  class="external-link" target="_blank" rel="noopener">https://github.com/binhex/arch-delugevpn</a>. It is a docker
container which has a deluge torrent client (web based) and vpn running
alongside it. It also has a kill switch which will stop the torrent when
vpn is disconnected. In a previous post <a href="/posts/oracle-alwyas-free-vm.html" >Trying out always free ARM VMs in oracle cloud </a>
I have explained how I have setup wireguard vpn in oracle ARM VMs using
<a href="https://github.com/angristan/wireguard-install"  class="external-link" target="_blank" rel="noopener">wireguard install</a>
script. I&rsquo;m going to use that to setup arch-delugevpn with wireguard in
my machine.</p>
<p>I wrote a docker-compose file from the docker run commands mentioned in
the github readme, taking inspiration from this <a href="https://www.youtube.com/watch?v=5Tls2LRKh-c"  class="external-link" target="_blank" rel="noopener">youtube video</a>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;3&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">services</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">delugevpn</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l">delugevpn</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">binhex/arch-delugevpn:latest</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l">unless-stopped</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">sysctls</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="l">net.ipv4.conf.all.src_valid_mark=1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">privileged</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">ports</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="m">0.0.0.0</span><span class="p">:</span><span class="m">8112</span><span class="p">:</span><span class="m">8112</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="m">58846</span><span class="p">:</span><span class="m">58846</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="m">58946</span><span class="p">:</span><span class="m">58946</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="m">0.0.0.0</span><span class="p">:</span><span class="m">8118</span><span class="p">:</span><span class="m">8118</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">environment</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">VPN_ENABLED=yes</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">VPN_PROV=custom</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">VPN_CLIENT=wireguard</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">ENABLE_PRIVOXY=yes</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">LAN_NETWORK=192.168.1.0/24</span><span class="w"> </span><span class="c"># Replace with your network&#39;s IP</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">NAME_SERVERS=1.1.1.1,1.0.0.1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">DELUGE_DAEMON_LOG_LEVEL=info</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">DELUGE_WEB_LOG_LEVEL=info</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">DEBUG=false</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">UMASK=000</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">PUID=1000</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">PGID=1000</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">TZ=Europe/Berlin</span><span class="w"> </span><span class="c"># Replace with your timezone – check https://en.wikipedia.org/wiki/List_of_tz_database_time_zones for reference</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">volumes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">/home/jayadeep/docker-volumes/deluge-data:/data</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">./config:/config</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="l">/etc/localtime:/etc/localtime:ro</span><span class="w">
</span></span></span></code></pre></div><p>In the volumes section, you can notice that there is a <code>config</code> folder
and a <code>data</code> folder. I kept the config folder along with the
docker-compose file and data in a separate location. Now all you have to
do is copy the wireguard config to the <code>config/wireguard</code> folder and
start the container.</p>
<pre tabindex="0"><code>docker-compose up
</code></pre><p>It will connect the vpn, start deluge client and also expose a proxy on
port 8112. You can configure this proxy (localhost:8112) in your
applications or browser to route the traffic from specific apps through
VPN, while keeping the rest of the apps in the public network.</p>
<p>Make sure to check for IP leaks before downloading anything from
torrent. I used this website <a href="https://www.top10vpn.com/tools/do-i-leak/"  class="external-link" target="_blank" rel="noopener">https://www.top10vpn.com/tools/do-i-leak/</a>
and <a href="https://torguard.net/checkmytorrentipaddress.php"  class="external-link" target="_blank" rel="noopener">https://torguard.net/checkmytorrentipaddress.php</a> to ensure that my
public IP is not exposed.</p>
<p><strong>Another word of caution:</strong> If you are hosting your own vpn, the IP
address can be still traced back to you. Copyright owners of pirated
content can contact the ISP of the cloud provider and they can terminate
your account or take legal actions.</p>

      </div>


      <footer>
        


        
        
        
        
        

        
        
      </footer>
    </article>

    
  </section>

    </div>

    <footer class="footer">
  <section class="container">
    ©
    
    2024
     Jayadeep KM 
    ·
    
    Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/" target="_blank" rel="noopener">Coder</a>.
    
  </section>
</footer>

  </main>

  

  
  
  <script src="/js/coder.js"></script>
  

  

  


  
  



  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
</body>

</html>
